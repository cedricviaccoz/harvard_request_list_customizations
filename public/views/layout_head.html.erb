<link href="<%= "/assets/harvard_request_list.css" %>" media="all" rel="stylesheet" type="text/css">
<script type="text/javascript">
	let triggerElementDisplayByWindowSize = function(event){
		let showMoreButton = document.getElementsByClassName('rl-ha-expand-help');
		let expandedHelpDiv = document.getElementsByClassName('rl-ha-expanded-help');
		let itemList = document.getElementsByClassName('col-sm-12 no-pad');
		let itemListHeader = document.getElementsByClassName('rl-item-list-header');

		let blockRHSnoneLHS = function(rhs, lhs){
			if(rhs.length > 0 && lhs.length > 0){
				rhs[0].style.display = "block";
				lhs[0].style.display = "none";
			}
		}

		let triggerVerticalDisplay = function(){
			let selectDiv = document.getElementById("rl-select-buttons-subgroup");
			let sortDiv = document.getElementById("rl-sort-buttons-subgroup");

			selectDiv.classList.remove('btn-group');
			selectDiv.classList.add('btn-group-vertical');

			sortDiv.classList.remove('btn-group');
			sortDiv.classList.add('btn-group-vertical');

		}


		let triggerHorizontalDisplay = function(){
			let selectDiv = document.getElementById("rl-select-buttons-subgroup");
			let sortDiv = document.getElementById("rl-sort-buttons-subgroup");

			selectDiv.classList.remove('btn-group-vertical');
			selectDiv.classList.add('btn-group');

			sortDiv.classList.remove('btn-group-vertical');
			sortDiv.classList.add('btn-group');
		}
		//786 pix chosen to be consistent with aspace-hvd-pui css changes.
		if(window.innerWidth >= 768){


			triggerHorizontalDisplay();
			blockRHSnoneLHS(itemList, itemListHeader);
			blockRHSnoneLHS(expandedHelpDiv, showMoreButton);
			carretBasePosition();
			let backToTopContainer = document.getElementsByClassName('back-to-top-button-container');
			if(backToTopContainer.length > 0){
				backToTopContainer[0].style.display = "none";
			}

			document.getElementById("rl-select-buttons-subgroup").style.display="block";
			document.getElementById("rl-sort-buttons-subgroup").style.display="block";
		}else{
			triggerVerticalDisplay()
			if (itemListHeader.length > 0 && itemListHeader[0].style.display != "block"){
				blockRHSnoneLHS(itemListHeader, itemList);
			}
			if (showMoreButton.length > 0 && showMoreButton[0].style.display != "block"){
				blockRHSnoneLHS(showMoreButton, expandedHelpDiv);	
			}
		}
	}

	window.onresize = triggerElementDisplayByWindowSize;
	// this should trigger the function on the page loading. 
	$(document).ready(triggerElementDisplayByWindowSize);


	// so that the carret go back to its base position when the window get stretched in the width.
	let carretBasePosition = function(){
		let theCarret = document.getElementsByClassName("rl-item-list-caret");
		if(theCarret.length>0){
			theCarret[0].style.transform = 'rotate(0deg)';
		}
	}

	let triggerRequestListBox = function(){
		// this part trigger apparition/disparition of the item list according to its current statue
		let theBox = document.getElementsByClassName("request-list-item-default");
		let backToTopContainer = document.getElementsByClassName('back-to-top-button-container');
		if(theBox.length >0){
			let newDisplayStyle = (theBox[0].style.display == "none"? "block":"none");
			theBox[0].style.display = newDisplayStyle;
			if(backToTopContainer.length > 0){
				backToTopContainer[0].style.display = newDisplayStyle;
			}
		}

		//this part mirror vertically the carret according to the item list's state.
		let theCarret = document.getElementsByClassName("rl-item-list-caret");
		if(theCarret.length>0){
			let rotationDeg = theBox[0].style.display == "none"?0:180;
			theCarret[0].style.transform = 'rotate('+rotationDeg+'deg)';
		}
	};


	function triggerRequestListDropdown(dropdownKind){
		let currDiv = document.getElementById("rl-"+dropdownKind+"-buttons-subgroup");
		console.log(currDiv)
		let newDisplayStyle = currDiv.style.display=='none'?'block':'none';
		currDiv.style.display = newDisplayStyle;
	}
</script>